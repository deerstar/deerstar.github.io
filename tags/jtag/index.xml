<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>JTAG on DeerStar的博客</title><link>https://deerstar.xyz/tags/jtag/</link><description>Recent content in JTAG on DeerStar的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 02 Jan 2026 16:00:00 +0800</lastBuildDate><atom:link href="https://deerstar.xyz/tags/jtag/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux环境下FPGA远程JTAG调试配置指南</title><link>https://deerstar.xyz/2026/linux-fpga-remote-jtag-hw-server/</link><pubDate>Fri, 02 Jan 2026 16:00:00 +0800</pubDate><guid>https://deerstar.xyz/2026/linux-fpga-remote-jtag-hw-server/</guid><description>&lt;h1 id="linux环境下fpga远程jtag调试配置指南"&gt;Linux环境下FPGA远程JTAG调试配置指南
&lt;/h1&gt;
&lt;h2 id="环境说明"&gt;环境说明
&lt;/h2&gt;
&lt;h3 id="硬件配置"&gt;硬件配置
&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Linux调试服务器：Ubuntu 20.04（物理机或虚拟机均可）&lt;/li&gt;
&lt;li&gt;FPGA板卡：通过PCIe金手指插在物理主板上（暂无PCIE固件）&lt;/li&gt;
&lt;li&gt;JTAG下载器：FT232H (USB接口，ID: 0403:6014)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="软件环境"&gt;软件环境
&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;调试服务器：Ubuntu 20.04 + Xilinx Vivado Lab 2018.3&lt;/li&gt;
&lt;li&gt;工作电脑：Windows/Linux + Vivado&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="需求分析"&gt;需求分析
&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;目标&lt;/strong&gt;：在工作电脑上通过局域网远程调试Linux服务器上的FPGA板卡&lt;/p&gt;
&lt;h3 id="实现方案"&gt;实现方案
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;hw_server网络桥接方案&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;适用场景&lt;/strong&gt;：通过JTAG接口调试，板卡无需PCIE固件&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;优点&lt;/strong&gt;：配置简单灵活，工作电脑操作体验好，支持跨网络调试&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实现思路&lt;/strong&gt;：
&lt;ol&gt;
&lt;li&gt;JTAG下载器通过USB连接到Linux服务器&lt;/li&gt;
&lt;li&gt;Linux服务器运行hw_server监听网络端口&lt;/li&gt;
&lt;li&gt;工作电脑Vivado通过网络连接hw_server进行调试&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;架构示意&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;工作电脑(Vivado) &amp;lt;---网络---&amp;gt; Linux服务器(hw_server) &amp;lt;---USB---&amp;gt; JTAG下载器 &amp;lt;---JTAG---&amp;gt; FPGA板卡
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="配置步骤"&gt;配置步骤
&lt;/h2&gt;
&lt;h3 id="一确认jtag下载器连接"&gt;一、确认JTAG下载器连接
&lt;/h3&gt;
&lt;h4 id="1-查看usb设备"&gt;1. 查看USB设备
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;lsusb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;找到JTAG下载器设备（示例输出）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Bus 001 Device 002: ID 0403:6014 Future Technology Devices International, Ltd FT232H
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;记下设备ID：&lt;code&gt;0403:6014&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="二安装vivado-lab"&gt;二、安装Vivado Lab
&lt;/h3&gt;
&lt;h4 id="1-运行安装程序"&gt;1. 运行安装程序
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 普通用户安装到家目录（推荐）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./xsetup
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 或使用root权限安装到系统目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo -E ./xsetup
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;建议安装路径：&lt;code&gt;~/Xilinx/Vivado_Lab/2018.3&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="2-解决依赖问题"&gt;2. 解决依赖问题
&lt;/h4&gt;
&lt;p&gt;Ubuntu 20.04缺少旧版本库，需创建软链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 先查看现有库版本&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ls -l /lib/x86_64-linux-gnu/libtinfo.so*
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 创建libtinfo.so.5软链接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo ln -s /lib/x86_64-linux-gnu/libtinfo.so.6 /lib/x86_64-linux-gnu/libtinfo.so.5
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 创建libncurses.so.5软链接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo ln -s /lib/x86_64-linux-gnu/libncurses.so.6 /lib/x86_64-linux-gnu/libncurses.so.5
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id="3-验证安装"&gt;3. 验证安装
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/Xilinx/Vivado_Lab/2018.3/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./vivado_lab
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;能正常启动GUI即成功。&lt;/p&gt;
&lt;h3 id="三配置usb设备权限"&gt;三、配置USB设备权限
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;原因分析&lt;/strong&gt;：hw_server需要访问USB设备，默认普通用户没有权限。&lt;/p&gt;
&lt;h4 id="1-创建udev规则"&gt;1. 创建udev规则
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo vim /etc/udev/rules.d/52-xilinx-ftdi-usb.rules
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;写入以下内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;SUBSYSTEM==&amp;#34;usb&amp;#34;, ATTRS{idVendor}==&amp;#34;0403&amp;#34;, ATTRS{idProduct}==&amp;#34;6014&amp;#34;, MODE=&amp;#34;0666&amp;#34;, GROUP=&amp;#34;plugdev&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id="2-重载规则"&gt;2. 重载规则
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo udevadm control --reload-rules
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo udevadm trigger
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="四启动hw_server"&gt;四、启动hw_server
&lt;/h3&gt;
&lt;h4 id="1-检查端口占用"&gt;1. 检查端口占用
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo netstat -tulnp &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="m"&gt;3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果3121被占用，换用其他端口（如3122）。&lt;/p&gt;
&lt;h4 id="2-启动hw_server"&gt;2. 启动hw_server
&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/Xilinx/Vivado_Lab/2018.3/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./hw_server -s TCP:*:3121
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;看到以下输出即成功：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;****** Xilinx hw_server v2018.3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;INFO: hw_server application started
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;INFO: Use Ctrl-C to exit hw_server application
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id="3-验证监听状态"&gt;3. 验证监听状态
&lt;/h4&gt;
&lt;p&gt;另开终端执行：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;netstat -tuln &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="m"&gt;3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;应该能看到 &lt;code&gt;0.0.0.0:3121&lt;/code&gt; 在LISTEN状态。&lt;/p&gt;
&lt;h3 id="五工作电脑远程连接"&gt;五、工作电脑远程连接
&lt;/h3&gt;
&lt;h4 id="1-打开vivado-hardware-manager"&gt;1. 打开Vivado Hardware Manager
&lt;/h4&gt;
&lt;p&gt;在工作电脑的Vivado中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;菜单：&lt;code&gt;Flow&lt;/code&gt; → &lt;code&gt;Open Hardware Manager&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;或点击左侧 &lt;code&gt;Flow Navigator&lt;/code&gt; → &lt;code&gt;Open Hardware Manager&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-添加远程硬件目标"&gt;2. 添加远程硬件目标
&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;点击 &lt;code&gt;Open target&lt;/code&gt; → &lt;code&gt;Open New Target&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择 &lt;code&gt;Remote server&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置连接参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Host name&lt;/strong&gt;: Linux服务器的IP地址（如：192.168.1.100）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Port&lt;/strong&gt;: 3121（或hw_server实际监听端口）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;点击 &lt;code&gt;Next&lt;/code&gt; → &lt;code&gt;Finish&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-验证连接"&gt;3. 验证连接
&lt;/h4&gt;
&lt;p&gt;成功后应能在Hardware窗口看到JTAG链路和FPGA芯片。&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://deerstar.xyz/2026/linux-fpga-remote-jtag-hw-server/%E9%85%8D%E5%9B%BE10%EF%BC%9A%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E7%95%8C%E9%9D%A2.png"
alt="连接成功界面"&gt;&lt;figcaption&gt;
&lt;p&gt;连接成功界面&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id="常见问题排查"&gt;常见问题排查
&lt;/h2&gt;
&lt;h3 id="1-hw_server提示socket-bind-error-地址已在使用"&gt;1. hw_server提示&amp;quot;Socket bind error. 地址已在使用&amp;quot;
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;原因&lt;/strong&gt;：端口被占用&lt;br&gt;
&lt;strong&gt;解决&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 查看占用进程&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo netstat -tulnp &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="m"&gt;3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 换用其他端口&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./hw_server -s TCP:*:3122
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-hardware-manager显示no-device"&gt;2. Hardware Manager显示&amp;quot;No device&amp;quot;
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;原因&lt;/strong&gt;：USB权限不足或udev规则未生效&lt;br&gt;
&lt;strong&gt;排查步骤&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 1. 确认设备在系统中&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;lsusb &lt;span class="p"&gt;|&lt;/span&gt; grep 0403:6014
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 2. 检查当前用户组&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;groups
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 3. 添加用户到plugdev组（如果不在）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo usermod -a -G plugdev &lt;span class="nv"&gt;$USER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 4. 注销重新登录后重启hw_server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-vivado-lab启动报库文件错误"&gt;3. Vivado Lab启动报库文件错误
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;错误信息&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;couldn&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t load file &amp;#34;libxxx.so&amp;#34;: libtinfo.so.5: cannot open shared object file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;解决&lt;/strong&gt;：创建软链接指向新版本库（见步骤二-2）&lt;/p&gt;
&lt;h3 id="4-工作电脑无法连接hw_server"&gt;4. 工作电脑无法连接hw_server
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;排查步骤&lt;/strong&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 1. 测试网络连通性&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ping Linux服务器IP
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 2. 测试端口连通性&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;telnet Linux服务器IP &lt;span class="m"&gt;3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 或&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nc -zv Linux服务器IP &lt;span class="m"&gt;3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 3. 检查防火墙（如有）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo ufw status
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo ufw allow 3121/tcp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="5-jtag通信速度慢或不稳定"&gt;5. JTAG通信速度慢或不稳定
&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;可能原因&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;USB线缆质量差或过长&lt;/li&gt;
&lt;li&gt;USB Hub供电不足&lt;/li&gt;
&lt;li&gt;USB 2.0/3.0兼容性问题&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;建议&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用优质短线直连&lt;/li&gt;
&lt;li&gt;避免使用USB Hub&lt;/li&gt;
&lt;li&gt;尝试不同USB接口&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="扩展优化"&gt;扩展优化
&lt;/h2&gt;
&lt;h3 id="1-hw_server后台运行"&gt;1. hw_server后台运行
&lt;/h3&gt;
&lt;p&gt;使用screen保持hw_server持续运行：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 安装screen&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt install screen
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 创建会话&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;screen -S hwserver
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 启动hw_server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~/Xilinx/Vivado_Lab/2018.3/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./hw_server -s TCP:*:3121
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 按 Ctrl+A 然后按 D 分离会话&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 重新连接会话&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;screen -r hwserver
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-开机自启动hw_server"&gt;2. 开机自启动hw_server
&lt;/h3&gt;
&lt;p&gt;创建systemd服务：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo vim /etc/systemd/system/hw_server.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;写入以下内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Xilinx Hardware Server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;User&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;你的用户名&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/你的用户名/Xilinx/Vivado_Lab/2018.3/bin/hw_server -s TCP:*:3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;on-failure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;启用服务：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; hw_server
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl start hw_server
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 查看状态&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl status hw_server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-多用户并发访问"&gt;3. 多用户并发访问
&lt;/h3&gt;
&lt;p&gt;hw_server支持多个客户端同时连接，但同一时间只能有一个客户端控制JTAG。配置要点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用不同的工作电脑连接同一个hw_server&lt;/li&gt;
&lt;li&gt;第一个连接的客户端获得控制权&lt;/li&gt;
&lt;li&gt;其他客户端只能监控状态&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-ssl加密连接可选"&gt;4. SSL加密连接（可选）
&lt;/h3&gt;
&lt;p&gt;对于跨公网的远程调试，可以配置SSH隧道加密：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 在工作电脑上执行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh -L 3121:localhost:3121 user@Linux服务器IP
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 然后在Vivado中连接 localhost:3121&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="调试技巧"&gt;调试技巧
&lt;/h2&gt;
&lt;h3 id="1-调整jtag时钟频率"&gt;1. 调整JTAG时钟频率
&lt;/h3&gt;
&lt;p&gt;如果遇到通信错误，可以降低JTAG频率：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hardware Manager → Properties → TCK Frequency&lt;/li&gt;
&lt;li&gt;尝试从 15MHz 降到 1MHz 或更低&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-查看hw_server日志"&gt;2. 查看hw_server日志
&lt;/h3&gt;
&lt;p&gt;hw_server终端会实时显示连接状态和错误信息，调试时保持观察。&lt;/p&gt;
&lt;h3 id="3-多设备jtag链"&gt;3. 多设备JTAG链
&lt;/h3&gt;
&lt;p&gt;如果板卡上有多个FPGA或其他JTAG设备串联，确保在Vivado中选择正确的目标器件。&lt;/p&gt;
&lt;h2 id="总结"&gt;总结
&lt;/h2&gt;
&lt;p&gt;本方案通过hw_server实现了Linux环境下的FPGA远程JTAG调试，核心思路：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;硬件层&lt;/strong&gt;：JTAG下载器USB连接到Linux服务器&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软件层&lt;/strong&gt;：Linux服务器运行hw_server桥接JTAG通信&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;网络层&lt;/strong&gt;：工作电脑通过TCP/IP远程连接hw_server&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;优点&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;配置简单，无需板卡PCIE固件&lt;/li&gt;
&lt;li&gt;支持局域网/广域网远程调试&lt;/li&gt;
&lt;li&gt;工作电脑操作体验与本地调试一致&lt;/li&gt;
&lt;li&gt;可多人共享同一套硬件环境&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;适用场景&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;实验室/公司共享FPGA开发板&lt;/li&gt;
&lt;li&gt;远程办公FPGA开发&lt;/li&gt;
&lt;li&gt;自动化测试系统&lt;/li&gt;
&lt;li&gt;板卡无PCIE固件的调试场景&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;测试环境：Ubuntu 20.04 + Vivado Lab 2018.3 + FT232H JTAG&lt;/em&gt;&lt;br&gt;
&lt;em&gt;日期：2026年1月&lt;/em&gt;&lt;/p&gt;</description></item><item><title>Xilinx JTAG 驱动问题排查与解决</title><link>https://deerstar.xyz/2025/xilinx-jtag-driver-issue/</link><pubDate>Sat, 20 Dec 2025 09:15:00 +0800</pubDate><guid>https://deerstar.xyz/2025/xilinx-jtag-driver-issue/</guid><description>&lt;h1 id="问题背景"&gt;问题背景
&lt;/h1&gt;
&lt;p&gt;在 Windows 10 64 位系统中，当同时安装多个版本的 Vivado（如 Vivado 2016.4 和 Vivado 2018.1）后，USB-JTAG 下载器可能出现驱动识别异常问题。&lt;/p&gt;
&lt;h2 id="环境信息"&gt;环境信息
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;目标平台&lt;/strong&gt;：Xilinx ZYNQ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;操作系统&lt;/strong&gt;：Windows 10 64-bit&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;工具版本&lt;/strong&gt;：Vivado 2016.4、Vivado 2018.1 共存&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id="问题现象"&gt;问题现象
&lt;/h1&gt;
&lt;p&gt;在第一次连接 USB-JTAG 下载器时，手动指定驱动程序位置为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;C:\Xilinx\Vivado\2017.4\data\xicom\cable_drivers\nt64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;系统提示驱动安装成功，但出现以下异常现象：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;硬件层面&lt;/strong&gt;：下载器上的连接指示灯不亮&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;系统识别&lt;/strong&gt;：设备管理器中显示设备名称为 &lt;code&gt;Xilinx Embedded Platform USB Firmware Loader&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软件层面&lt;/strong&gt;：Vivado 无法识别到 JTAG 设备，无法进行下载和调试&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="问题分析"&gt;问题分析
&lt;/h1&gt;
&lt;p&gt;该问题的根本原因在于：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;多版本 Vivado 共存时，驱动程序可能互相冲突&lt;/li&gt;
&lt;li&gt;系统安装了错误的固件加载驱动（Firmware Loader），而非实际工作驱动&lt;/li&gt;
&lt;li&gt;缺少 Jungo WinDriver 底层驱动支持&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正确的驱动应显示为 &lt;code&gt;Xilinx USB Cable&lt;/code&gt;，而非 &lt;code&gt;USB Firmware Loader&lt;/code&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="解决方案"&gt;解决方案
&lt;/h1&gt;
&lt;h2 id="步骤-1安装-jungo-驱动"&gt;步骤 1：安装 Jungo 驱动
&lt;/h2&gt;
&lt;p&gt;Jungo WinDriver 是 Xilinx JTAG 设备的底层驱动基础。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;定位到较低版本 Vivado 的驱动目录，例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;C:\Xilinx_16.4\Vivado\2016.4\data\xicom\cable_drivers\nt64\
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;以&lt;strong&gt;管理员权限&lt;/strong&gt;运行批处理文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;install_drivers_wrapper.bat
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装完成后，打开设备管理器，确认出现 &lt;code&gt;Jungo - WinDriver&lt;/code&gt; 设备节点。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="步骤-2卸载错误驱动"&gt;步骤 2：卸载错误驱动
&lt;/h2&gt;
&lt;p&gt;清除之前安装的错误固件加载驱动：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;打开设备管理器&lt;/li&gt;
&lt;li&gt;找到 &lt;code&gt;Xilinx Embedded Platform USB Firmware Loader&lt;/code&gt; 设备&lt;/li&gt;
&lt;li&gt;右键选择 &lt;strong&gt;&amp;ldquo;卸载设备&amp;rdquo;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;重要&lt;/strong&gt;：勾选 &lt;strong&gt;&amp;ldquo;删除此设备的驱动程序软件&amp;rdquo;&lt;/strong&gt; 选项&lt;/li&gt;
&lt;li&gt;点击确认完成卸载&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：部分系统可能提示需要重启计算机，建议按提示重启以彻底清除驱动残留。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="步骤-3重新识别设备"&gt;步骤 3：重新识别设备
&lt;/h2&gt;
&lt;p&gt;让系统自动安装正确的驱动：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;重新拔插 USB-JTAG 下载器&lt;/li&gt;
&lt;li&gt;Windows 将自动检测设备并安装正确的驱动程序&lt;/li&gt;
&lt;li&gt;此时设备管理器中应显示为 &lt;code&gt;Xilinx USB Cable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;下载器指示灯正常点亮&lt;/li&gt;
&lt;li&gt;打开 Vivado，在 Hardware Manager 中可正常识别 JTAG 设备&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="验证方法"&gt;验证方法
&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;硬件验证&lt;/strong&gt;：USB-JTAG 下载器连接指示灯亮起（通常为绿色常亮或闪烁）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;系统验证&lt;/strong&gt;：设备管理器中显示 &lt;code&gt;Xilinx USB Cable&lt;/code&gt;，无感叹号或问号&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;软件验证&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;打开 Vivado&lt;/li&gt;
&lt;li&gt;依次选择：&lt;code&gt;Flow&lt;/code&gt; → &lt;code&gt;Open Hardware Manager&lt;/code&gt; → &lt;code&gt;Open Target&lt;/code&gt; → &lt;code&gt;Auto Connect&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;成功识别到目标 FPGA 或 ZYNQ 器件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="经验总结"&gt;经验总结
&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;多版本共存&lt;/strong&gt;：建议在安装新版本 Vivado 前，先运行旧版本的 Jungo 驱动安装程序&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;驱动顺序&lt;/strong&gt;：优先使用较低版本（如 2016.x）的驱动安装脚本，兼容性更好&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;权限问题&lt;/strong&gt;：所有驱动相关操作必须使用管理员权限&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;彻底清除&lt;/strong&gt;：卸载驱动时务必勾选&amp;quot;删除驱动程序软件&amp;quot;，避免残留影响&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动识别&lt;/strong&gt;：正确的驱动应由 Windows 自动安装，无需手动指定 inf 文件&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="相关资源"&gt;相关资源
&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://support.xilinx.com/s/article/54381" target="_blank" rel="noopener"
&gt;Xilinx Answer 54381&lt;/a&gt; - Cable Driver Installation on Windows&lt;/li&gt;
&lt;li&gt;Vivado 驱动路径（按实际安装位置替换版本号）：
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;lt;Vivado安装目录&amp;gt;\data\xicom\cable_drivers\nt64\
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="参考链接"&gt;参考链接
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Xilinx 官方技术支持：&lt;a class="link" href="https://support.xilinx.com" target="_blank" rel="noopener"
&gt;https://support.xilinx.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Vivado Design Suite 用户指南&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>